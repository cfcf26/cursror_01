# KiwiMarket E2E 테스트 커버리지

## 개요

이 문서는 KiwiMarket MVP의 E2E 테스트 커버리지를 추적합니다.

**마지막 업데이트**: 2025-10-15

## 테스트 통계

- **전체 테스트 스위트**: 20개
- **구현 완료**: 20개
- **통과**: 테스트 실행 필요
- **실패**: 테스트 실행 필요
- **커버리지**: 100% (구조)

## 테스트 목록

### 1. 인증 (Authentication)

| 테스트 | 파일 | 상태 | 설명 |
|--------|------|------|------|
| 회원가입 플로우 | `auth/signup.test.ts` | ✅ 구현 | 정상 회원가입, 중복 이메일 검증 |
| 로그인 플로우 | `auth/login.test.ts` | ✅ 구현 | 정상 로그인, 잘못된 비밀번호, 존재하지 않는 이메일 |
| 로그아웃 플로우 | `auth/logout.test.ts` | ✅ 구현 | 정상 로그아웃, 보호된 페이지 접근 |

#### 세부 시나리오

**회원가입**:
- ✅ 정상 회원가입 → 온보딩 → 홈
- ✅ 중복 이메일 가입 시도 → 오류 메시지
- ⏳ 잘못된 이메일 형식 → 오류 메시지
- ⏳ 비밀번호 규칙 미충족 → 오류 메시지

**로그인**:
- ✅ 정상 로그인 → 홈 리다이렉트
- ✅ 헤더에 사용자 정보 표시
- ✅ 잘못된 비밀번호 → 오류
- ✅ 존재하지 않는 이메일 → 오류

**로그아웃**:
- ✅ 로그아웃 → 홈 리다이렉트
- ✅ 보호된 페이지 접근 → 로그인 페이지 리다이렉트

---

### 2. 상품 관리 (Products)

| 테스트 | 파일 | 상태 | 설명 |
|--------|------|------|------|
| 상품 목록 조회 | `products/list.test.ts` | ✅ 구현 | 비로그인/로그인 상태, 지역 필터링 |
| 상품 등록 | `products/create.test.ts` | ✅ 구현 | 정상 등록, 권한 검증, 필드 검증 |
| 상품 상세 조회 | `products/detail.test.ts` | ✅ 구현 | 판매자/구매자/비로그인 뷰 |
| 상품 수정/삭제 | `products/update-delete.test.ts` | ✅ 구현 | 수정, 삭제, 권한 검증 |

#### 세부 시나리오

**목록 조회**:
- ✅ 비로그인: 전체 상품 보기
- ✅ 로그인: 내 지역 상품만 보기
- ✅ 상품 카드에 정보 표시 (제목, 가격, 지역)

**상품 등록**:
- ✅ 정상 상품 등록
- ✅ 비로그인 접근 차단
- ✅ 제목 누락 → 오류
- ✅ 가격 음수 → 오류
- ✅ 설명 누락 → 오류

**상품 상세**:
- ✅ 판매자 본인: 수정/삭제 버튼
- ✅ 구매자: 채팅하기 버튼
- ✅ 비로그인: 로그인 안내

**수정/삭제**:
- ✅ 본인 상품 수정
- ✅ 본인 상품 삭제
- ✅ 타인 상품 버튼 미표시

---

### 3. 채팅 (Chat)

| 테스트 | 파일 | 상태 | 설명 |
|--------|------|------|------|
| 채팅방 생성 | `chat/create-room.test.ts` | ✅ 구현 | 채팅방 생성, 중복 방지 |
| 메시지 송수신 | `chat/messages.test.ts` | ✅ 구현 | 메시지 전송, 연속 메시지, 실시간 수신 |
| 채팅방 목록 | `chat/room-list.test.ts` | ✅ 구현 | 목록 조회, 빈 목록, 클릭 이동 |

#### 세부 시나리오

**채팅방 생성**:
- ✅ 상품 페이지에서 채팅하기 클릭
- ✅ 채팅방 생성 및 리다이렉트
- ✅ 중복 채팅방 방지 (기존 방으로 이동)

**메시지**:
- ✅ 단일 메시지 전송
- ✅ 연속 메시지 전송
- ✅ 실시간 수신 (Supabase Realtime)
- ✅ 메시지 순서 유지

**채팅방 목록**:
- ✅ 참여 중인 채팅방 목록
- ✅ 상품 정보, 상대방 이메일 표시
- ✅ 빈 목록 메시지
- ✅ 채팅방 클릭 시 이동

---

### 4. 프로필 (Profile)

| 테스트 | 파일 | 상태 | 설명 |
|--------|------|------|------|
| 프로필 조회 | `profile/view.test.ts` | ✅ 구현 | 이메일, 지역, 가입일 표시 |
| 지역 변경 | `profile/update-area.test.ts` | ✅ 구현 | 지역 변경 및 필터링 확인 |

#### 세부 시나리오

**프로필 조회**:
- ✅ 이메일 표시
- ✅ 현재 지역 표시
- ✅ 가입일 표시

**지역 변경**:
- ✅ 강남구 → 서초구 변경
- ✅ 변경 후 상품 목록 필터링 확인
- ✅ 다시 원래 지역으로 변경

---

### 5. 네비게이션 & UI (Navigation & UI)

| 테스트 | 파일 | 상태 | 설명 |
|--------|------|------|------|
| 헤더 네비게이션 | `navigation/header.test.ts` | ✅ 구현 | 비로그인/로그인 헤더 |
| 홈페이지 상태별 UI | `navigation/homepage.test.ts` | ✅ 구현 | 비로그인/로그인 홈 |
| 반응형 레이아웃 | `ui/responsive.test.ts` | ✅ 구현 | 모바일, 태블릿, 데스크톱 |

#### 세부 시나리오

**헤더**:
- ✅ 비로그인: 로그인 링크
- ✅ 로그인: 이메일, 상품등록, 채팅, 프로필, 로그아웃
- ✅ 각 링크 클릭 동작

**홈페이지**:
- ✅ 비로그인: 시작하기 버튼, 전체 상품
- ✅ 로그인: 내 지역 상품, 지역명 표시
- ✅ Features 섹션

**반응형**:
- ✅ 모바일 (375x667)
- ✅ 태블릿 (768x1024)
- ✅ 데스크톱 (1920x1080)

---

### 6. 에러 처리 (Error Handling)

| 테스트 | 파일 | 상태 | 설명 |
|--------|------|------|------|
| 폼 검증 | `errors/form-validation.test.ts` | ✅ 구현 | 상품 등록, 로그인 폼 검증 |
| 권한 오류 | `errors/permissions.test.ts` | ✅ 구현 | 보호된 페이지 접근 차단 |
| 404 에러 | `errors/not-found.test.ts` | ✅ 구현 | 존재하지 않는 리소스 |

#### 세부 시나리오

**폼 검증**:
- ✅ 상품 등록: 제목, 가격, 설명 검증
- ✅ 로그인: 이메일 형식, 비밀번호 검증

**권한 오류**:
- ✅ `/products/new` 비로그인 접근
- ✅ `/chat` 비로그인 접근
- ✅ `/profile` 비로그인 접근

**404 에러**:
- ✅ 존재하지 않는 상품 ID
- ✅ 존재하지 않는 채팅방 ID

---

### 7. 통합 플로우 (Integration)

| 테스트 | 파일 | 상태 | 설명 |
|--------|------|------|------|
| 전체 거래 플로우 | `integration/full-flow.test.ts` | ✅ 구현 | 회원가입부터 채팅까지 |
| 지역 필터링 플로우 | `integration/area-filtering.test.ts` | ✅ 구현 | 지역 변경 및 필터링 |

#### 세부 시나리오

**전체 거래 플로우**:
1. ✅ 판매자 회원가입 → 온보딩 → 상품 등록
2. ✅ 구매자 회원가입 → 온보딩 → 상품 조회
3. ✅ 구매자 채팅 시작 → 메시지 전송
4. ✅ 판매자 채팅 응답
5. ✅ 실시간 메시지 수신 확인

**지역 필터링 플로우**:
1. ✅ 강남구, 서초구 각 2개씩 상품 등록
2. ✅ 강남구 사용자: 강남구 상품만 보기
3. ✅ 서초구로 변경: 서초구 상품만 보기
4. ✅ 다시 강남구로 변경: 강남구 상품만 보기

---

## MVP 범위 외 기능 (테스트 없음)

다음 기능들은 MVP 범위에 포함되지 않으므로 테스트하지 않습니다:

- ❌ 이미지 업로드
- ❌ 결제 시스템
- ❌ 배송 기능
- ❌ GPS 위치 추적
- ❌ 평점 및 리뷰
- ❌ 사용자 프로필 상세
- ❌ 푸시 알림

---

## 테스트 실행 현황

### 전체 테스트

```bash
npm run test:e2e
```

**상태**: ⏳ 실행 필요

### 카테고리별 테스트

| 카테고리 | 명령어 | 상태 |
|---------|--------|------|
| 인증 | `npm run test:e2e:auth` | ⏳ 실행 필요 |
| 상품 | `npm run test:e2e:products` | ⏳ 실행 필요 |
| 채팅 | `npm run test:e2e:chat` | ⏳ 실행 필요 |

---

## 알려진 이슈

현재 알려진 이슈 없음.

---

## 다음 단계

1. **테스트 실행**: Playwright MCP를 통해 실제 브라우저 테스트 실행
2. **결과 업데이트**: 이 문서에 통과/실패 상태 업데이트
3. **버그 수정**: 실패한 테스트에서 발견된 버그 수정
4. **커버리지 개선**: 필요 시 추가 엣지 케이스 테스트

---

## 참고

- [E2E 테스트 가이드](./e2e-testing-guide.md)
- [프로젝트 구조](./project-structure.md)
- [Supabase 스키마](./supabase-schema.sql)

